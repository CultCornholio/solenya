## msph
Description....

### Commands

Command: msph init {client_id} [-r]
Description: 
    Initializes the WorkSpace.
Positional Arguments: {client_id}
    {client_id} : The client id of the application with needed permissions.
Flags:
    [--reset-hard] : Resets an existing WorkSpace.
    [-t --target] : Specifies active target name, 'default' otherwise.
    [-v --verbose] : Show output of API.


Command: msph target {target_name} [-r / -d, --hard]
Description: 
    Manages targets stored in the WorkSpace.
Positional Arguments: {target_name}
    {target_name} : The name of the target. Run 'msph target {target_name}' to create a new target.
                    New targets are automatically assigned a device_code and user_code via API call.
                    All targets must have unique names. If not {target_name} or flags are supplied
                    the command will output all available targets.
Flags:
    [-r --reset] : Resets the device_code and user_id of specified target. 
                    Program will block if target has non expired refresh_token.
    [-d --delete] : Deletes target specified by {target_name}. 
                    Program will block if target has non expired refresh_token.
    [--hard] : Overwrites the block in the previous flags.

Command: msph switch [-t] {target_name}
Description:
    Switches active target.
Positional Arguments: {target_name}
    {target_name} : The name of the target to switch to.
Flags:
    [-t --target] : Automatically execute 'msph target {target_name}' command before running the 'switch' command.

Command: msph auth phish [-a, -m, -v]
Description:
    Sends the device_code to API endpoint to try and retrieve a access_token and refresh_token.
Positional Arguments:
    None
Flags:
    [-a --all] : Executes command for all registered targets that do not have a non expired refresh token.
    [-v --verbose] : Show output of API. Not recommended with [--all] or [--monitor] flags.
    [-m --monitor] : Continuously makes API calls until tokens are obtained or user_code expires.

Command: msph auth refresh [-a]
Description:
    Uses the refresh_token to obtain a new access token.
Positional Arguments:
    None
Flags:
    [-a --all] : Executes command for all registered targets that have a non expired access_token.


(Other commands that need documentation and development)

msph dump : Dumps information using access_token
msph status : Returns status of targets (auth_status, tokens/codes, tokens/codes_expirations)
msph export : Exports information from the WorkSpace database.

### Examples of Usage:

msph target
msph target beast
msph target toad
msph target -r toad
msph target -d beast

msph status 
msph status beast

msph switch toad
msph switch beast
msph switch -t laze

msph auth phish -am
msph auth refresh -a

msph dump emails --outfile dump.json
msph dump emails -a 

### WorkSpace Tables

WspSettings
    id: (int) -- index
    client_id: (str) -- the client_id of the application.
    active_target: (foreign_key) -- the id of the target that is active

Target:
    id: (int) -- index
    device_code: (str) -- the device_code.
    user_code: (str) -- the user code.
    access_token: (str) -- the access token of the target.
    refresh_token: (str) -- the refresh token of the target.
    device_code_ts: (datetime) -- the datetime at which the the device_token was obtained. 
    access_token_ts: (datetime) -- the datetime at which the access_token was obtained.
    refresh_token_ts: (datetime) -- the datetime at which the refresh_token was obtained.
    



